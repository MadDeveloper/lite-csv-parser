(function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.parseCSV=b()})("undefined"==typeof self?this:self,function(){return(a,b)=>(b=b||{},b.separator=b.separator||",",b.withHeaders=b.withHeaders||!0,new Promise((c,d)=>{try{var e=a.replace(/\r/gm,"").replace(/^\s*\n?$/gm,"").split("\n");""===e[e.length-1]&&e.pop();var f=b.withHeaders?e[0].split(","):[],g=0<f.length?e.slice(1):e,h=0<f.length?g.map(a=>a.split(b.separator).reduce((a,b,c)=>(a[f[c]]=b,a),{})):g.map(a=>a.split(separator));c(h)}catch(a){d(a)}}))});
